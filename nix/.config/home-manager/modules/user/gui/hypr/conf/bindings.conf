$M1 = Alt
$M4 = SUPER
$C = Control
$S = Shift

$menu = walker
$pypr = ~/bin/pypr-client
$browser = floorp

# Scratchpads
bind = $M4,d, exec, $pypr toggle teardown
bind = $M4,e, exec, $pypr toggle im
bind = $M4,v, exec, $pypr toggle discord
bind = $M4,f, exec, $pypr toggle music
bind = $M4,t, exec, $pypr toggle torrment
bind = $M4+$C,p, exec, $pypr toggle mixer

# Run-or-raise stuff
bind = $M4,w, exec, raise --class $browser --launch $browser
bind = $M4,x, exec, raise --class "term" --launch "kitty --class term"
bind = $M4,q, exec, raise --class "nwim" --launch "kitty --class nwim -e nvim --server /tmp/nvim.sock --remote || nvim --listen /tmp/nvim.sock"
bind = $M4,b, exec, raise --class "mpv" --launch "~/bin/pl video"
bind = $M4+$C,c, exec, raise --class "swayimg" --launch "~/bin/sx ~/dw/"
bind = $M4+$S,c, exec, ~/bin/wl
bind = $M4+$C,v, exec, raise --class "Bazecor" --launch "bazecor"
bind = $M4,g, exec, raise --class "steam" --launch "flatpak run com.valvesoftware.Steam || steam"
bind = $M4,o, exec, raise --class "org.pwmt.zathura" --launch "zathura"
bind = $M4+$C,n, exec, raise --class "Obsidian" --launch "flatpak run md.obsidian.Obsidian"
bind = $M4+$S,o, exec, raise --class "obs" --launch "obs"

bind = $M4+$S,k, exec, uwsm stop,
bind = $M4, apostrophe, exec, pypr exit && hyprctl reload

bind = $M1,Tab, workspace, previous
bind = $M4,slash, workspace, previous
bind = $M4+$C,backslash, resizeactive, exact 640 480 # Make target window small enough
bind = $M4,Tab, cyclenext # Go to the next window
bind = $M4,Tab, bringactivetotop, # And bring it on top

# Change keyboard layout
bind = $M4,S, exec, sh -c 'hyprctl -j devices | jq -r ".keyboards[].name" | while read k; do hyprctl switchxkblayout "$k" next; done'

# Submaps split into separate files for clarity
source = ~/.config/hypr/bindings/resize.conf
source = ~/.config/hypr/bindings/special.conf
source = ~/.config/hypr/bindings/wallpaper.conf
source = ~/.config/hypr/bindings/tiling.conf
source = ~/.config/hypr/bindings/tiling-helpers.conf
source = ~/.config/hypr/bindings/media.conf

#-----------------------
bind = $M1,g, exec, ~/bin/hypr-win-list
bind = $M4+$S,m, exec, ~/bin/main-menu
bind = $M4+$S,r, exec, grimblast save screen --notify ~/pic/shots/satty-$(date "+%Y%m%d-%H.%M.%S").png
bind = $M4+$S+$C,r, exec, grimblast save area ~/pic/shots/satty-$(date "+%Y%m%d-%H.%M.%S").png
# Clipboard history (cliphist + rofi)
bind = $M4,c, exec, pkill rofi || cliphist list | rofi -dmenu -matching fuzzy -i -p "Clipboard" -theme clip | cliphist decode | wl-copy
bind = $M1,q, exec, $menu
bind = $M4+$M1+$S,q, exec, hyprctl kill # Pick and kill a window

bind = $M4,Escape, killactive
bind = $M4,r, fullscreen
## hy3 handles focus movement; remove duplicate core movefocus binds

bind = $M4,h, hy3:movefocus, l
bind = $M4,j, hy3:movefocus, d
bind = $M4,k, hy3:movefocus, u
bind = $M4,l, hy3:movefocus, r
#-----------------------
# Tiling submap moved to bindings/tiling.conf

# Tiling helpers moved to bindings/tiling-helpers.conf

bindl = $M4,Return, exec, kitty || foot || alacritty
bindl = $M4+$S,h, exec, dunstctl history-pop
bindl = $M4+$S,l, exec, pkill rofi || ~/bin/rofi-lutris
bindl = $M4,p, exec, pkill rofi || rofi-pass
bindl = $M4,space, exec, dunstctl close-all

#-- Mouse bindings
bind = $M4,mouse_down, workspace, e+1
bind = $M4,mouse_up, workspace, e-1
bindm = $M4,mouse:272, movewindow
bindm = $M4,mouse:273, resizewindow
